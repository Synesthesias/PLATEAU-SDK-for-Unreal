{
  "index.html": {
    "href": "index.html",
    "title": "PLATEAU SDK for Unreal | PLATEAU SDK for Unreal",
    "keywords": "PLATEAU SDK for Unreal このパッケージには、 PLATEAU の3D都市モデルデータを利用するためのAPI、サンプルが含まれます。PLATEAU SDK for Unrealを利用することで、実世界を舞台にしたアプリケーションの開発や、PLATEAUの豊富なデータを活用したシミュレーションを簡単に行うことができます。 Note PLATEAU SDK for Unrealは利用者アンケートを実施しています。 今後の開発の参考にするため、ユーザーの皆様の忌憚ないご意見をお聞かせください。 ◆アンケートはこちら Note PLATEAU Slackコミュニティにどなたでもご参加いただけます。 参加希望の方は、お問い合わせページよりお気軽にお問い合わせください。 ◆お問い合わせページはこちら"
  },
  "manual/AccessCityObject.html": {
    "href": "manual/AccessCityObject.html",
    "title": "属性情報へのアクセス | PLATEAU SDK for Unreal",
    "keywords": "属性情報へのアクセス このページではブループリントを利用して3D都市モデルの属性情報にアクセスする方法を記載します。 属性情報を確認する(PLATEAU SDKのエディタ機能) SDK画面から各地物の属性情報を確認いただけます。 PLATEAU SDKウィンドウの「属性情報」タブを開きます。 ウィンドウ/ワールドセッティング の GameMode/ゲームモードオーバーライド を ClickEventGameMode に指定します。 PlayerControllerで左クリック入力を受け付けるように設定している場合はこの手順は行っていただく必要はありません。 レベルをプレイします。 地物をクリックすると、その地物IDと属性情報が表示されます。 ビュー上のピンク色の線は、選択中の主要地物の範囲を示します。 ビュー上の緑色の線は、選択中の最小地物の範囲を示します。 地物IDがビュー中の文字で表示され、属性情報は属性情報ウィンドウのテキストボックスに表示されます。 主要地物と最小地物について 例えば、建物を主要地物単位でインポートした場合は、1つのComponentおよび1つのStaticMeshで1つの建物を表します。 その1つのメッシュを分解すると、「壁」「屋根」などのパーツになります。 この場合、建物全体が主要地物であり、壁、屋根などのパーツが最小地物に該当します。 ここで建物をクリックして属性情報を表示すると、主要地物（建物全体、1つのメッシュ）としての属性情報と、最小地物（壁や屋根など、メッシュの一部分）としての属性情報が両方表示されます。 建物を最小地物単位でインポートした場合、壁や屋根ごとにゲームオブジェクトおよびメッシュが分かれます。 この場合、最小地物ゲームオブジェクトの親ゲームオブジェクトから主要地物の情報を取得します。 建物を地域単位でインポートした場合、複数の主要地物が結合されます。 この場合、メッシュの一部分として主要地物および最小地物の情報を取得できます。 属性情報へアクセスするブループリント Caution SDK画面を開いている状態では以下のスクリプトは動作しないため、SDK画面を閉じてから実行してください。 Caution プロジェクト設定で下記項目のチェックボックスを有効にすることでクリック時に地物の属性情報を取得できるようになります。 日本語表記： プロジェクト設定 > 物理 > 最適化 > 検索結果のUVをサポート 英語表記 ： Project Settings > Physics > Optimization > Support UV From Hit Results SDKにはサンプルのブループリントが含まれています。 確認するには、コンテンツブラウザで 設定 → プラグインコンテンツを表示 にチェックを入れ、次の場所にあるブループリントを開いてください： Plugins/PLATEAU SDK for Unreal コンテンツ/Samples/AttributeLoadSample/ClickToGetAttribute このブループリントを利用するには次のようにします： 都市モデルをインポートしたレベルに ClickToGetAttribute を配置します。 ウィンドウ/ワールドセッティング の GameMode/ゲームモードオーバーライド を ClickEventGameMode に指定します。 再生して都市オブジェクトをクリックすると属性情報が表示されます。 ブループリントの説明 キー入力受付の有効化 レベルの開始時に EnableInput 関数を呼び出し、このBPがキー入力を受け取れるようにします。 クリックされた地物を取得する 左ボタンクリック時にカーソル位置にLineTraceを行い、クリックされた地物(CityObject)を取得します。 LineTraceはSDKで提供している LineTraceCityObject 関数を利用します。 地物の属性情報を取得する 取得されたCityObjectの GetAttributes 関数を呼び出し、属性情報のTMapを取得します。 都市オブジェクトの属性情報の表示 TMapから各属性情報値を取得し、 GetString 関数で文字列として内容を取り出します。 PrintString 関数で文字列を画面内に表示します。"
  },
  "manual/ChangeColorByAttrs.html": {
    "href": "manual/ChangeColorByAttrs.html",
    "title": "属性情報によって色分けする | PLATEAU SDK for Unreal",
    "keywords": "属性情報によって色分けする 上図は土地計画の区分を色分けするサンプルです。 上図は水害リスクを色分けするサンプルです。 このサンプルでは、土地計画決定情報および水害時の想定浸水高に関する属性情報を読み取り、それに応じてランタイムで色を変えます。 サンプルLevel、Blueprintを開く 属性情報によって色分けするサンプルLevelは次の場所にあります。 レベルの負荷とファイルサイズを考慮し、都市範囲を縮小して提供しています。 Plugins > PLATEAU SDK for Unreal Content > Samples > AttributesColorSample > AttributesColorSample 属性情報を読み取り、色を変えるBlueprintは次の場所にあります。 Plugins > PLATEAU SDK for Unreal Content > Samples > AttributesColorSample > AttributesColorSampleLogic プラグインフォルダが表示されていない場合は設定からチェックボックスを入れることで表示できます。 土地計画の区分を色分けするサンプル 上のコードを解説します。 属性情報を取得するには、まず各地物ゲームオブジェクトに対してインポート時に付与される PLATEAUCityObjectGroupコンポーネント にアクセスします。Outlinerで対象の PlateauInstancedCityModel を選択すると下図の用にコンポーネントがいくつも確認できます。土地計画区分で色分けするコンポーネントは urf という名前のコンポーネントであるため、BlueprintではObjectNameに urf を含む場合に処理をします。 PLATEAUCityObjectGroupコンポーネント 内には地物に関する情報が保存されています。 インポート時に地域単位に設定した場合、1つのコンポーネントの中に複数の地物情報(CityObject)が入っています。 主要地物単位、または最小地物単位の場合はCityObjectは1つです。 いくつであっても、 GetAllCityObjects でCityObjectを取得できます。 属性情報はキーとバリューのペアが集まったものです。 バリューの型は、String型または入れ子のAttributesMap(キーバリューの組が集まったもの)のどちらかであり、対応するgetterで値を取得できます。なお、Double型など他の型のgetterもありますが、内部的には単にStringをパースしたものです。下図はString型の属性情報を取得する例です。 属性値に応じてマテリアルの BaseColor を変えることで、属性情報を可視化できます。 水害リスクを色分けするサンプル 上のコードを解説します。 災害区分で色分けするコンポーネントはfldという名前のコンポーネントであるため、BlueprintではObjectNameに fld を含む場合に処理をします。 fldの PLATEAUCityObjectGroupコンポーネント では属性情報が入れ子になっています。 下図ではバリューがキーバリューセットの際に値を取得する例です。 uro:floodingRiskAttribute をキーとする入れ子で、キー uro:rank の値を取得しています。 属性値に応じてマテリアルの BaseColor を変えることで、属性情報を可視化できます。"
  },
  "manual/ClassifyModel.html": {
    "href": "manual/ClassifyModel.html",
    "title": "マテリアル分け | PLATEAU SDK for Unreal",
    "keywords": "マテリアル分け このページではワールドに配置された3D都市モデルを都市オブジェクトのタイプごとにマテリアル分けする手順を説明します。 前提 ワールド内に3D都市モデルがインポートされていることが前提です。 インポートの方法については 3D都市モデルのインポート をご覧ください。 結合・分離手順 結合・分離対象の指定 メニューバーから PLATEAU → PLATEAU SDK を選択し、 モデル修正 から マテリアル分け を開きます。 マテリアル分け対象をアウトライナーから選択し、詳細パネルからコンポーネントを選択します。選択されたコンポーネントが選択オブジェクト項目に表示されます。 マテリアル分類を指定して、検索ボタンを押します。 対象コンポーネントに含まれる地物型がリストアップされますので、変更したい地物の マテリアルを変更する にチェックを入れ、マテリアルを選択します。 マテリアル分け完了後の地物単位を 粒度 プルダウンから選択します。 元のデータを残す場合は、 変換元を削除 のチェックを外します。 実行 ボタンを押すとマテリアル分け処理が開始されます。 Note コンポーネント選択 選択対象コンポーネントは複数指定可能です。また階層となるコンポーネントの親コンポーネントを選択した場合子コンポーネントが全て選択対象となります。"
  },
  "manual/EditorAPI.html": {
    "href": "manual/EditorAPI.html",
    "title": "エディタAPI | PLATEAU SDK for Unreal",
    "keywords": "エディタAPI このページではブループリントで、エディタAPIを使用する方法を記載します。 インポート PLATEAU SDKウィンドウの インポート の機能をAPIにてご利用いただけます。 準備 インポートを行うためにPLATEAUCityModelPackageをKeyとして、PackageInfoSettingsをValueとしたMapデータを作成します。 特定の地物のみ読み込む場合のインポートデータ設定 インポートするPLATEAUCityModelPackageとPackageInfoSettingsをMapデータに格納します。 PackageInfoSettingsの各項目はの設定は、PLATEAU SDKウィンドウの インポート に対応しています。 全ての地物を読み込む場合のインポートデータ設定 PLATEAU|BPLibraries|Util|GetAllCityModelPackagesにて全てのパッケージを取得し、Mapデータに格納します。 PackageInfoSettingsの各項目はの設定は、PLATEAU SDKウィンドウの インポート に対応しています。 ローカルからのインポート PLATEAU|BPLibraries|ImportAPI|Get City Model Loader Localを配置します。 参照するローカルのCityGMLまでのパスをSource Pathにセットします。 読み込みたい地域のメッシュコードのArrayをMesh Codesにセットします。 基準座標系の番号をZone IDにセットします。 オフセット値のx,y,zの値をVectorとしてReference Pointにセットします。 上記で作成したPLATEAUCityModelPackageをKeyとして、PackageInfoSettingsをValueとしたMapデータをPackage Info Settings Dataにセットします。 Return ValueでPLATEAUCityModelLoaderを取得できます。 サーバーからのインポート PLATEAU|BPLibraries|ImportAPI|Get City Model Loader Serverを配置します。 接続先を上書きする場合は、In Server URL, In Tokenの値をセットします。上書きしない場合は空欄にします。 Dataset IDをセットします。 （取得方法は、以下のNOTEを参照してください。） 読み込みたい地域のメッシュコードのArrayをMesh Codesにセットします。 基準座標系の番号をZoneIDにセットします。 オフセット値のx,y,zの値をVectorとしてReference Pointにセットします。 上記で作成したPLATEAUCityModelPackageをKeyとして、PackageInfoSettingsをValueとしたMapデータをPackage Info Settings Dataにセットします。 Return ValueでPLATEAUCityModelLoaderを取得できます。 Note Dataset IDの取得 PLATEAU SDKにてサーバからインポートを行いシーン上のPLATEAUCityModelLoaderを選択します。詳細パネルのSource項目がDataset IDに該当します。 ローカル・サーバー共通 Is Validを使用して、上記で取得したPLATEAUCityModelLoaderが利用可能かどうか確認します。 PLATEAUCityModelLoaderをTargetとしてPLATEAU|Load Modelを配置します。 Note Validでない場合、内部エラーが発生していますので、設定項目に間違いがないかご確認ください。 ロード完了通知 PLATEAUCityModelLoaderにImport Finished Delegate Eventをバインドすることで、ロード完了通知を受け取る事ができます。 ロードキャンセル PLATEAUCityModelLoaderをTargetとしてPLATEAU|Cancelを配置することでロードをキャンセルする事ができます。 エクスポート PLATEAU SDKウィンドウの エクスポート の機能をAPIにてご利用いただけます。 エクスポートするModelを含むPLATEAUInstancedCityModelを取得します。 PLATEAU|BPLibraries|ExportAPI|Export Modelを配置し、Target City Modelに取得したPLATEAUInstancedCityModelをセットします。 PLATEAUMeshExportOptionsを配置し、各項目を設定し、Optionsにセットします。 設定内容は、PLATEAU SDKウィンドウの エクスポート に対応しています。 出力するフォルダーパスを Export Pathに設定します。 ゲームオブジェクトON/OFF PLATEAU SDKウィンドウの ゲームオブジェクトON/OFF の機能をAPIにてご利用いただけます。 フィルタするModelを含むPLATEAUInstancedCityModelを取得します。 PLATEAU|BPLibraries|ModelAdjustmentAPI|Filter Modelを配置し、Target City Modelに取得したPLATEAUInstancedCityModelをセットします。 表示するパッケージ(EPLATEAUCityModelPackage)のArrayをEnablePackagesにセットします。 表示する各パッケージ(EPLATEAUCityModelPackage)ごとのLOD(PLATEAUPackageLod)をパッケージをKey,LODをValueとしたMapにしてPackageToLodRangeMapにセットします。 重複する地物を非表示にする場合は、OnlyMaxLodをTrueに設定します。 表示するタイプ(EPLATEAUCityObjectsType)のArrayをEnableCityObjectsにセットします。 結合・分離 PLATEAU SDKウィンドウの 結合・分離 の機能をAPIにてご利用いただけます。 結合・分離するModelを含むPLATEAUInstancedCityModelを取得します。 PLATEAU|BPLibraries|ReconstructAPI|Reconstruct Modelを配置し、Target City Modelに取得したPLATEAUInstancedCityModelをセットします。 取得したPLATEAUInstancedCityModel内の結合・分離する各SceneComponentのArrayをTargetComponentsにセットします。 結合・分離単位(EPLATEAUMeshGranularity)をReconstructTypeにセットします。 地域単位:PerCityModelArea, 主要地物単位:PerPrimaryFeatureObject, 最小地物単位:PerAtomicFeatureObject 変換元を削除する場合は、DestroyOriginalをTrueに設定します。 Note 上の例では、Convertタグをつけたコンポーネントのみを変換しています。"
  },
  "manual/ExportCityModels.html": {
    "href": "manual/ExportCityModels.html",
    "title": "3D都市モデルのエクスポート | PLATEAU SDK for Unreal",
    "keywords": "3D都市モデルのエクスポート Unrealのレベルに配置された都市の3Dモデルを、objファイルや gltfファイルとしてエクスポートできます。 このページではエクスポートの手順を説明します。 前提 ワールド内に3D都市モデルがインポートされていることが前提です。 インポートの方法については 3D都市モデルのインポート をご覧ください。 エクスポート手順 エクスポート対象の指定 メニューバーから PLATEAU → PLATEAU SDK を選択します。 表示されるウィンドウの上部に4つのタブ「インポート、モデル調整、エクスポート、属性情報」があります。 このうちエクスポートを選択します。 エクスポート対象の選択 エクスポート対象をアウトライナーから選択します。 対象として選択できるのはインポート時に生成されたゲームオブジェクトのうち、 親子関係における最上位のものです。 親子関係の最上位には自動で PLATEAUInstancedCityModel コンポーネントが付与されています。 このコンポーネントを持つゲームオブジェクトが選択対象となります。 出力オプションの設定 オプションの設定項目について説明します。 出力形式 OBJ FBX フォーマット を次から選択します。 お使いの用途に合わせて選択してください。 バイナリ ASCII GLTF フォーマット を次から選択します。 バイナリ 3Dモデルとその関連データをまとめて1つのファイルとするフォーマットです。 ASCII 3Dモデル、テクスチャ、binファイルを別々のファイルとするフォーマットです。 テクスチャを出力する 出力にテクスチャを含めるかどうかを設定します。チェックが付いていれば含みます。 座標変換 座標の基準点を設定します。 Local (ローカル) のとき: ポリゴンの座標は PLATEAUInstancedCityModel の位置を原点とした座標で表されます。 Plane Cartesian (直交座標系) のとき: ポリゴンの座標は、国土交通省が定める直交座標系のうち、インポート時に選択した直交座標系を原点とするよう平行移動されます。 上図は 国土地理院のWebサイト「わかりやすい平面直角座標系」 より引用 (原点マークは別途追記) 2つの使い分けについて 原点付近に3Dモデルが来るようにしたいときは Local 原点から遠い位置に3Dモデルが配置されますが、複数の異なる都市をエクスポートするときに位置の整合性を取りたいときは Plane Cartesian が利用できます。 非表示モデルを出力する ヒエラルキー上で非表示になっているゲームオブジェクトを含めるかどうかを設定します。 チェックが外れているとき、非表示のものを出力から除外します。 ここでいう 非表示 とは、下図のチェックマークが自身または親において外れている状態を指します。 座標系の設定 Unrealではobj・fbxファイルはzが上向きの右手座標系として扱われるため エクスポートしたobj・fbxファイルをUnrealにインポートしたい場合は、 ENU を指定してください。 gltfの場合は、yが上向きの右手座標系として扱われるため WUN を指定し、インポート時にz軸を180度回転させてください。 座標軸設定の趣旨: x,y,z 軸がどの方向を向いているかはアプリケーションによって異なりますが、 この設定項目によって座標軸の違いに合わせて変換できます。 座標軸の名称はアルファベット3文字で表され、 (1文字目,2文字目,3文字目) が (x軸,y軸,z軸) の向きを表します。 例えば、Unrealでは x軸が東(East), y軸が南(South), z軸が上(UP) を向くので、 頭文字をとって ESU が Unrealの座標系となります。 W は 西(West) を、N は 北(North) を表します。 エクスポートの実行 右端の 参照... から出力先のフォルダを指定します。 モデルをエクスポート ボタンを押してしばらく待ちます。 指定のフォルダに3Dモデルファイルが出力されます。 上図はエクスポートしたobjファイルを Blender で読み込んだものです。 Note エクスポートした3Dモデルを再度UnrealEngineに取り込む場合 テクスチャ込みでエクスポートしたものを再度UEにインポートする場合は、 Unreal Engineの「ファイル」→「レベルにインポート」メニューを選択し、3Dモデルファイルをインポートしてください。 Note UVのない地物のテクスチャについて 都市モデルにはUVのない地物が含まれる場合があります。 PLATEAU SDKでは、UVのない地物に対してはTriplanarを使ったデフォルトマテリアルを使用することで見た目を構成しています。 これをエクスポートするとき、テクスチャは出力可能ですが、他の3DCGソフトで見た目を再現するには同じようにTriplanarシェーダーを使用する必要があります。"
  },
  "manual/ImportCityModels.html": {
    "href": "manual/ImportCityModels.html",
    "title": "3D都市モデルのインポート | PLATEAU SDK for Unreal",
    "keywords": "3D都市モデルのインポート このページでは、都市データをUE5のプロジェクトにインポートする手順を説明します。 準備 PLATEAU SDK for Unreal を導入したUE5プロジェクトを用意します。 SDKの導入方法は インストール を参照してください。 インポート手順 インポート元の選択 Unreal Engineのメニューバーから PLATEAU → PLATEAU SDK を選択します。 表示されるウィンドウの上部に3つのタブ「インポート、モデル調整、エクスポート、属性情報」があります。 このうちインポートを選択します。 インポート元で ローカル か サーバー を選択します。 ローカルからインポートする場合 導入したい都市データが自分のコンピュータにある場合はローカルを選択します。3D都市モデルは G空間情報センターのPLATEAUポータルサイト からCityGMLをダウンロードできます。 参照 ボタンを押します。都市データのフォルダの選択画面が表示されます。 都市データのフォルダの中には、 udx , codelists という名前のフォルダがあるはずです。 udx から 階層が1つ上 のフォルダを選択します。 Note CityGMLのバージョン G空間情報センターのWebサイトからダウンロードできるCityGMLについて、複数のバージョンが掲載されている場合があります(v3とv2があるなど)。 2025年3月現在は、最新のv3に対応しています。今後に新しいバージョンが出た際には対応していく予定です。 サーバーからインポートする場合 サーバー では、PLATEAUのデータサーバーから直接3D都市モデルをインポートできます。 接続先設定 の欄がありますが、設定しなくとも自動でデフォルトのURLに接続されます。 別のURLに接続したい場合のみ、URLを入力して「サーバーデータ更新」ボタンを押してください。 トークン は Bearer認証のトークンです。 データセットの選択 で 都道府県 を選択します。 するとその都道府県に対応する データセット が選択肢に出てくるので選びます。 基準座標系の選択 リストのうち、都市が属する場所として近いものを選択します。 適切なものを選ぶと座標の誤差が小さくなります。 ここで選択する座標系は国土交通省が定める平面直角座標系に準拠しています。 詳しくは 国土地理院のWebサイト「わかりやすい平面直角座標系」 をご覧ください。 インポート範囲の選択 範囲選択 ボタンを押すと範囲選択画面が開きます。 範囲選択画面の操作方法： マウスホイールを上下に回してズームアウト、ズームインします。 マウスクリックしたままドラッグしてカメラ移動します。 範囲の選択方法については、画面右下に説明があるとおり、 クリックで選択/選択解除 ドラッグで矩形での選択追加 Shift+ドラッグで矩形での選択除外をします。 範囲がオレンジ色で表示されない場合は、見えるまでズームします。 ビューポート左上の決定ボタンを押して範囲を確定します。 画面のみかた： 青色の線は利用可能な地域を示します。 地域ごとに利用可能な地物種類とLODがアイコン形式で表示されます。(アイコンとして表示されない地物も一部存在します。) 対応LODは色で表現されます。画面左下の凡例の色と対応します。 アイコンが多すぎると感じる場合は、画面左下の凡例のチェックを切り替えることでアイコンの表示/非表示をLODごとに切り替えることができます。 地図は国土地理院のサイトから自動でダウンロードされて表示されます。インターネットへの接続が必要です。 区域に表示される番号は、後述の indexmap.pdf に記載の番号と同じです。 Note インポートにはインターネット接続が必要です 範囲選択画面の地図を表示するために、次のドメインにアクセスできる必要があります。 https://cyberjapandata.gsi.go.jp また、サーバーインポートでデータを取得するためには、次のドメインにアクセスできる必要があります。 https://api.plateau.reearth.io プロキシでの接続には対応しておりません。 補足 : 地域の区分を確認したい時は、ローカルにダウンロードしたフォルダに付属している indexmap という名前のpdfファイルをご覧ください。 下図のように地図上に区分が記載されています。 地物別設定 地物の種類ごとにインポートに関する設定を行います。 設定項目について: 一括設定 全地物タイプの項目を一括で設定できます。 上図の設定例について ： 建築物は「一括設定と同じ」のチェックが付いていないため個別に項目を設定できます。建築物の「インポートする」のチェックが付いていないのでインポートされません。 道路は「一括設定と同じ」のチェックが付いているため一括設定の項目が設定されます。一括設定の「インポートする」のチェックが付いているのでインポートされます。 インポートする チェックが付いている地物タイプのみインポートします。 テクスチャを含める テクスチャが存在する地物タイプで表示される設定項目です。 チェックが付いていて、かつテクスチャがある場合はそれを含めてインポートします。 都市データによってはテクスチャがない場合があり、 その場合はチェックを外した時と同様に真っ白な3Dモデルが出力されます。 テクスチャを結合する テクスチャを含める場合、テクスチャを結合するかしないかを設定します。 Note テクスチャ結合すると描画負荷が良くなります PLATEAUのデータはテクスチャの枚数が多い傾向にあり、 結合しないと描画負荷が高くなる傾向にあります。 結合機能を有効にすると、複数のテクスチャを1枚の画像にまとめ、 3DモデルのUVも合わせて調整されます。 それによって描画負荷を改善できます。 例えば、お台場の2km×2kmの建物について、 テクスチャ結合して4096×4096のテクスチャサイズにまとめたとき、 ドローコール数は2360から1960に向上しました。 テクスチャ解像度 テクスチャを結合する場合の、結合後のテクスチャの大きさを指定します。 最小LOD , 最大LOD 複数のLODを利用可能な地物タイプで表示される設定項目です。 Note LODとは gmlファイルの中には、3D都市モデルの形状の細かさを指定したいという需要に対応するため、 複数の形状データが格納されている場合があります。 LOD0がもっとも大雑把な形状で、LOD1, LOD2 と数字が上がるほど細かい形状になります。 建築物の場合、LOD0 は平面、LOD1は平面に一定の高さを付けたもの、LOD2はより細かい形状です。 なお、ここでいう LOD とは PLATEAU の仕様上の LOD を指します。 Unreal Engine の機能としての LOD とは異なる概念です。 モデル結合 主要地物単位（建築物,道路等） モデルのメッシュは建物ごとに結合されて出力されます。 建物ごとに地物データを取得できるようにしたい場合はこちらを選択します。 最小地物単位（壁面,屋根面等） 屋根、壁単位など非常に細かくオブジェクトを分けたい場合はこちらを選択します。 地域単位 モデルのメッシュは結合されて出力されます。 オブジェクト数を削減して軽量化できますが、建物ごとの地物データは取得不可になります。 メッシュの結合はある程度の大きさの範囲ごとに行われます。 地域単位でインポートする場合、見た目が同じマテリアルは結合されます。すなわち、色などの数値情報とテクスチャパスが同じ場合に結合されます。 デフォルトマテリアル PLATEAUの3Dモデルのうち、テクスチャやマテリアル指定がない箇所のマテリアルを指定します。 デフォルトでは、地物タイプに応じたマテリアルが指定されています。 Note 地物の選択について 地物の中にはインポートに時間がかかるものもあるのでご注意ください。 例えば 土地起伏 はデータの範囲が 10km × 10km と非常に広く、 データ容量が重く処理に時間がかかるのでご注意ください。 土地に衛星写真や地図を貼り付ける 土地に衛星写真や地図を貼り付けることができます。 設定方法 範囲選択画面で土地起伏の3Dモデルが存在する地域を選択すると、インポート設定に「起伏」が表示されます。 土地起伏では、上述の地物別設定に加えて土地起伏専用の設定項目があります。 衛星写真または地図を付与する チェックがONになっていると機能が有効化されます。 地図タイルURL 航空写真または地図の画像をダウンロードするためのURLです。 デフォルトでは地理院地図の航空写真のURLが入力されています。 このURLを変更すれば、航空写真だけでなく、国土地理院が提供している多種多様な地図や写真を土地に貼り付けることができます。 利用できる地図については 国土地理院のページ を参照してください。 そのページに記載されているURLを貼り付けることで地図を利用できます。 下図は地図を貼り付けた例です。 下図は陰影起伏図を貼り付けた例です。 URLには文字列 {z}, {x}, {y} を含めるようにしてください。これは地図タイルのxyz座標に変換されます。 地図タイルのxyz座標については 国土地理院のページ を参照してください。 SDKの機能により、土地の座標をもとに文字列 {z}, {x}, {y} を適切な数値に置き換えて画像をダウンロードします。 ズームレベル 地図タイルのズームレベルです。 数値が大きいほど高精細な画像になります。 数値が1つ下がると、画素数が4分の1になります。 ズームレベルは、地図タイルxyz座標のzの値に相当します。 利用可能なズームレベルの検索 ボタンを押すと、現在入力されているURLでどのズームレベルが利用可能なのかを検索します。 検索が完了すると、ズームレベルのドロップダウンの選択肢が変化し、利用可能なズームレベルから選択できるようになります。 この機能でダウンロードされた地図タイルは、自動で1枚の画像に結合され、土地のUVとマテリアルが設定されてインポートされます。 基準座標系からのオフセット値の設定 3Dモデルの原点をどこに置くかを指定します。 デフォルト値として、選択範囲の中心位置が自動入力されるので、 このままの値でインポート可能です。 3Dモデルの原点位置を調整したい場合のみ値を編集してください。 値の意味: 上のインポート設定で選択した「基準座標系」の原点から、 東西・南北・高さ方向にそれぞれ何メートルの地点を3Dモデルの原点とするかを表します。 基準座標系の原点は次の国土地理院のWebサイトで示されます: 国土地理院のサイト インポートの実行 モデルをインポート ボタンを押します。 処理が進むと、都市のオブジェクトが順次シーンに配置されていきます。 進捗表示がすべて「完了」になったらインポート終了です。 インポートのキャンセル インポート処理中に インポートをキャンセルする ボタンを押します。 キャンセル処理中は、ボタンが キャンセル中… の表記に変わります。 再度 モデルをインポート ボタンが表示されたらキャンセル完了です。 読み込み状況の確認 PLATEAUCityModelLoaderアクタの詳細パネルから読み込み状況の確認ができます。 原点情報の確認 インポートした3D都市モデルは原点付近に位置するようにオフセットがかけられます。 原点情報はPLATEAUInstancedCityModelアクタの詳細パネルから確認が可能です。 デフォルトマテリアルの見た目を変えたいとき PLATEAU SDKでは地物タイプごとにデフォルトマテリアルが用意されています。 例えば、下図の建物には建築物のデフォルトマテリアルが適用されています。 このマテリアルは独自のTriplanarマテリアルを利用しているため、UVのない地物にもテクスチャを投影できます。 PLATEAUのモデルにはUVが ない 場合があります。 そのため、ご自分で見た目をカスタマイズする場合でも、SDK付属のTriplanar系マテリアル、またはそれと同様のTriplanar機能を有したマテリアルを利用することを推奨します。 以下に同マテリアルをもとにしたマテリアルの作成方法を説明します。 SDK付属のマテリアルについて PLATEAU SDKのデフォルトマテリアルは、以下の3種類のマテリアルを元に作られています。 どれもUVなしでテクスチャを投影できるのが特徴です。 通常のTriplanarマテリアル デュアルテクスチャのTriplanarマテリアル 上下を向いた面と横を向いた面で異なる見た目を表現するTriplanarマテリアルです。 利用例：建築物の上を向いた面をコンクリートの屋根に、側面を窓付きの壁にしたい場合などに利用できます。 このマテリアルを元にして別のマテリアルを作成する手順は次のとおりです： コンテンツブラウザで Plugins/PLATEAU SDK for Unreal コンテンツ/Materials/Fallback を開きます。 ベースとしたいマテリアルを右クリックし、「マテリアルインスタンスを作成」します。 PlateauDefaultBuildingMaterial を元にした場合はデュアルテクスチャのTriplanarになります。 それ以外のデフォルトマテリアルを元にした場合は通常のTriplanarになります。 マテリアルにテクスチャを割り当て、設定します。設定項目は次のとおりです： MainTexture : メインのテクスチャです。 NormalMap : ノーマルマップです。 NormalMapStrength : ノーマルマップの強さです。 Tiling : テクスチャをタイリングさせる大きさです。 Blend : ポリゴンの向きに応じてテクスチャをブレンドさせる程度です。 Metallic : メタリック（金属感の強さ）です。 MetallicTexture : メタリックを表現するテクスチャです。 Roughness : ラフネス（ざらざら感の強さ）です。 RoughnessTexture : ラフネスを表現する強さです。 AmbientOcclusion : アンビエントオクルージョン(環境光の影響を受ける程度)です。 AmbientOcclusionTex : アンビエントオクルージョンを表現するテクスチャです。 EmissionColor : エミッション（発光）の色です。 EmissionTexture : エミッションを表現するテクスチャです。 Opacity : 不透明度です。 デュアルテクスチャでは、上記の設定値がそれぞれ Top と Side の2つに分かれます。Topは上下面、Sideは側面の見た目を設定します。 自作したマテリアルは、インポート後にドラッグ＆ドロップ等で適用できるほか、インポートの設定項目として「デフォルトマテリアル」に指定できます。"
  },
  "manual/Installation.html": {
    "href": "manual/Installation.html",
    "title": "インストール | PLATEAU SDK for Unreal",
    "keywords": "インストール 対応Unrealバージョンのインストール Unreal Engineの対応バージョンについて、 リリースページ に記載のバージョンを利用してください。 Epic Games Launcher から指定のバージョンをインストールできます。 Unrealプロジェクトの作成 先ほどインストールしたバージョンを起動します。 Project Defaultsで C++ を選択します。 適宜設定を行い 作成 を押します。 Unreal Engineの仕様上、プロジェクトパスに日本語が含まれるとビルド時にエラーが発生する場合があります。フォルダ名に日本語を含めないようにしてください。 既存のBlueprintプロジェクトを利用する場合 Note C++プロジェクトへのSDKを導入される場合はこの章の対応は必要ございません。 BlueprintプロジェクトにSDKを導入し、パッケージを作成した場合はアプリケーション起動時にエラーダイアログが表示されます。パッケージを利用される場合は下記の手順を追加で行って頂く必要がございます。 ダミーのC++クラスを追加 メニューからC++クラスを追加します 親クラスにNoneを選択します 新しいクラス名をつけます ダイアログを閉じた後、エディタを閉じます YES選択後に作成されたC++クラスがIDEで開かれます コードをビルドします（エディタを閉じていないとビルドエラーが出ます） エディターを起動してプロジェクトを開いた後、パッケージを作成してアプリケーションを起動できます PLATEAU SDK for Unrealの導入 リリースページ から提供されている PLATEAU-SDK-for-Unreal-{バージョン名}.zip をダウンロードします。 作成したプロジェクトのフォルダ（先ほどのプロジェクト作成で指定した場所）に Plugins という名前のフォルダを作成し、先程ダウンロードしたSDKを解凍しコピーします。 ( Plugins フォルダの作成は、 Unreal Engine のコンテンツブラウザからではなく、エクスプローラで作成してください。) Plugins/PLATEAU-SDK-for-Unreal/PLATEAU-SDK-for-Unreal.uplugin が存在することを確認します。 プロジェクトを開きます。既にプロジェクトを開いている場合は一度閉じてから再度プロジェクトを開いてください。 プロジェクトを開く際に以下の画面が表示される場合は はい を押して完了です。 エディタ設定の変更 自動保存の無効化 3D都市モデルのインポート中にマップの自動保存が実行された際エディタがクラッシュしてしまう場合があるため、以下の手順で自動保存を無効化してください。 エディタの環境設定 から ロード＆保存中 を選択します。 自動保存 内の マップを保存 のチェックを外します。 自動再インポート対象の除外 エディタの環境設定 から ロード＆保存中 を選択します。 自動再インポート 内の 監視するディレクトリ → インデックス[0] を選択します。 Include/Exclude Wildcards に除外対象として PLATEAU/Datasets/* を追加します。 この操作を行わない場合、取得されたgmlファイル等の生データを手動でインポート対象から除外する必要があります。 距離スケーリング済みのカメラ速度を使用 エディタの環境設定 から 距離スケーリング で検索します。 距離スケーリング済みのカメラ速度を使用 にチェックを入れます。 この操作を行うことで広域なマップでの操作性が向上します。 プラグインをビルドする場合 Windowsの場合、 Visual Studio の利用を想定しています。 Visual Studio についても、 リリースページ に記載のバージョンを利用してください。 バージョンが違うとビルドに失敗する場合があります。 Visual Studio のインストール時は、 こちらの手順に従って 追加のコンポーネントをインストールしてください。 MacOSの場合、Xcode がインストールされていることが前提となります。 トラブルシューティング うまく導入できない場合、次のことをご確認ください。 お使いのウイルス対策ソフトによっては、SDKに含まれるバイナリファイルが削除されることがあります。ウィルス対策ソフトによってSDKのファイルが削除されないよう設定をお願いします。 既存のBlueprintプロジェクトにSDKを導入してパッケージしたアプリケーションを起動した際に下図のエラーが出ます。 こちら を参照して下さい。"
  },
  "manual/ModelAdjust.html": {
    "href": "manual/ModelAdjust.html",
    "title": "3D都市モデルの調整 | PLATEAU SDK for Unreal",
    "keywords": "3D都市モデルの調整 概要 PLATEAUウィンドウの モデル調整 では、インポートした都市モデルを編集できます。 次の機能があります。 コンポーネントON/OFF 条件指定で一括でアクティブ化・非アクティブ化します。 分割/結合/マテリアル分け 地物の結合・分離や属性情報・地物型によるマテリアル分けを行います。 地形変換/高さ合わせ 地形の平滑化とテレインへの変換、高さ情報が無い地物（LOD1道路モデル等）の地形への高さ合わせを行います。 Note 地物とは・・建物、道路、地形など、地図上に表示されるもの。物理的なものとは限らず、都市計画区域、土砂災害警戒区域などの目には見えない領域を示すものも地物の一種として扱います。 地形とは・・地表の起伏です。 操作画面の開き方 Unrealのメニューバーから PLATEAU → PLATEAU SDK を選択します。 ウィンドウ上部のタブのうち モデル調整 を選択します。 その下のタブで各機能を切り替えて表示します。 コンポーネントON/OFF機能 条件指定をしてフィルタリングできます。 ここでいうフィルタリングとは、条件に合致するコンポーネントをアクティブにし、そうでないものを非アクティブにすることを指します。 「重複する地物を表示」にチェックを入れた場合、フィルタリング後に重複している地物について、 もっともLODが高いもののみを残してそれ以外を非表示にします。 表示したい地物の種類をチェックボックスで指定します。 チェックボックスは入れ子構造になっています。 第1階層のチェックボックスは、「建築物」「道路」などのパッケージ種別を指定します。 複数のLODがシーン中に存在する場合、パッケージ種別ごとにLOD範囲選択のスライダーを使ってLODを指定できます。 第2階層のチェックボックスは、「ドア」「屋根」など細かい都市オブジェクト分類での種別を指定します。 Note 都市インポート時のメッシュ結合単位の設定によっては、第2階層の分類チェックマークが動作しない場合があります。 例えば、インポート時に建物を「最小地物単位」に指定した場合、「窓」「屋根面」などでコンポーネントが分かれているので、細かい分類のチェックマークが動作します。 しかし、建物を「主要地物単位」にした場合、建物ごとにコンポーネントが結合されているので、細かい「窓」「屋根面」といった分類は動作しません。 分類指定のチェックマークは入れ子構造になっていますが、第1階層の「建築物」「道路」といった分類は結合単位によらず必ず動作し、 第2階層の「窓」「屋根面」といった細かい分類はインポート時に「最小値物単位」にした場合のみ動作します。 分割・結合・マテリアル分け機能 できること 選択されたコンポーネントの粒度を変更できます。 例えば、主要地物単位でインポートされたものを結合して地域単位にまとめたり、分解して最小地物単位にしたりできます。 属性情報も合わせて分割・結合されます。 地物型や属性情報に応じてマテリアルを設定できます。 例えば上図は、地物型によるマテリアル分けによって建築物の屋根面を緑色のマテリアルに設定した例です。 また下図は、属性情報によるマテリアル分けによって道路のうち歩道を緑色、車道を青色に設定した例です。 操作方法 PLATEAU Windowの「モデル調整」タブ → 「分割/結合/マテリアル分け」タブを開きます。 対象選択 対象選択 では処理の対象となるコンポーネントを指定します。 指定の方法は次のとおりいくつかあります。 追加 ボタンを押して開いたウインドウからコンポーネントを選択することで追加します。 選択中のn個を追加 ボタンを押すことで、現在選択中のオブジェクト（複数可）を追加します。 パッケージ種から選択 ボタンを押すことで下図の選択ウィンドウが開き、指定のパッケージ種に該当するものをまとめて指定します。 パッケージ種選択ウィンドウ内でデータセットを選択すると、データセットに含まれるパッケージ種が検索され選択肢として表示されます。 選択肢から任意個のパッケージを選んで 決定 を押して選択できます。 追加したオブジェクトは 除く ボタンで対象から除きます。 共通設定 オブジェクト配置 では、変換後に元オブジェクトを削除するか残すかを選択します。 分割/結合 粒度を変更する にチェックが入っている場合、 粒度 で指定した粒度に変換します。 最小地物単位（壁面・屋根等面等ごと） 主要地物内のマテリアルごと（マテリアル分けの結果に応じてコンポーネントを分けた場合に便利です） 主要地物単位（建築物・道路等ごと） すべて1つに結合（インポート時の地域単位に相当します） 粒度を変更する にチェックが入っていない状態でマテリアル分けした場合、現在と同じ粒度にします。 後述の マテリアルを条件指定で変更する にチェックが入っていない状態で実行ボタンを押した場合、マテリアルを変えずに粒度を変更します。 主要地物内の同一マテリアル単位 で分割結合した場合は出力されたコンポーネントの名前は\"Material-(マテリアルID)\"となり、それ以外の場合はコンポーネントが対応する地物のgml:idと同じ文字列で設定されます。 マテリアル分け 条件に応じてマテリアル分けをします。 また分割/結合で粒度が指定されている場合、その粒度に変換します。 マテリアルを条件指定で変更する にチェックが入っている場合、以下の設定項目のとおりにマテリアルを分けます。 チェックが入っていない場合、マテリアルを変更せず分割結合のみ行います。 分類 は、マテリアル分けの基準として 地物型 か 属性情報 を選択できます。 地物型でのマテリアル分け 地物型 をマテリアル分けの基準とした場合、設定項目は次のようになります。 下図は建築物のうち屋根面のみを緑色にする場合の設定です。 検索 ボタンを押すことでマテリアルの設定画面が表示されます。 表示される条件に合致するマテリアルを指定します。 マテリアルを変更する にチェックが入っていないものはマテリアルを変更しません。 チェックが入っているものに関してマテリアルを選択します。 属性情報でのマテリアル分け 属性情報 をマテリアル分けの基準とした場合、設定項目は次のようになります。 下図は道路のうち歩道部分を茶色、車道部分をグレー色にする場合の設定です。 属性情報キー で分類基準となる属性情報のキーを指定します。 この際、 属性情報キーを選択 ボタンを押すことで下図のウィンドウが表示され、選択肢から選んで入力できます。 このウィンドウでは、対象オブジェクトとその子に存在する属性情報を検索して表示します。 選択肢から1つ選んで 決定 ボタンを押すことで属性情報キーを選択します。 以下、 検索 ボタン、パターンごとのマテリアル指定、実行は上述の「地物型でのマテリアル分け」と同じです。 地形変換/高さ合わせ機能 地形変換 画面では以下を行えます。 地形をランドスケープに変換 地形モデルをUnrealのLandscapeに変換します。 高さ合わせ LOD1道路等、高さが付与されていない地物の地形への高さ合わせや、LOD3道路にめり込んでしまっている地形の形状修正を行います。 Note 高さ合わせ対象となる都市モデルは次のパッケージタイプです。 「道路、災害リスク、土地利用、都市計画決定情報、徒歩道、広場、水部、交通(航路)」 Note テレインのメリットは、例えば芸術的な目的で高さを変える、テクスチャペイントするなどの操作ができることにあります。 高さ合わせは、急傾斜の地形では誤差が出ることがあります。 使い方 変換対象 には、起伏モデルを含む都市モデルを選択します。 オブジェクト配置 プルダウンを選択します。 新規追加 は元のコンポーネントを非表示にし、そのまま残します。 置き換える は元のコンポーネントを削除します。 詳細設定 から詳細な設定が行えます。 実行 ボタンを押すと地形の平滑化が行われ、道路、災害リスク、土地利用等対象の都市モデルが変換した地形に重なるよう自動的に調整されます。 地形変換/高さ合わせ処理の出力結果について、ランドスケープは名前の先頭に\"TERRAIN_\"が付与されます。高さ合わせした地物については、前と同じ名前のコンポーネントが生成されます。 詳細設定 地形変換 地形変換 にチェックを入れると地形の変換（平滑化・テレインへの変換）が有効になり、詳細なオプションが表示されます。 解像度 プルダウンから変換時にハイトマップとして利用する画像解像度を選択できます。 地形変換 では、地形の起伏を滑らかに変更する処理が入ります。そのため、測量の高さを厳密に使いたいケース、特に測量からの誤差の少なさが重要となる状況ではこの処理はそぐわない場合があります。 ハイトマップ平滑化 にチェックを入れるとハイトマップにぼかしフィルターを適用し、よりスムーズな地形になります。 余白を端の高さに合わせる にチェックを入れるとハイトマップの余白を一番端のピクセルで埋めます。チェックが外れていると余白部分の高さは0になります。 高さ合わせ機能 高さ合わせ にチェックを入れると高さ合わせが有効になり、詳細なオプションが表示されます。 交通・区域モデルの高さを地形に合わせる にチェックをいれると道路、災害リスク、土地利用等の都市モデルを変換した地形に重なるよう調整します。 土地をLOD3道路モデルに合わせる にチェックをいれると地形モデルの形状がLOD3道路モデルに合わせて変形されます。 インスペクターで非表示にしていなくても、シーン上で非表示にしたものについては高さ合わせの対象外となります。 Caution 地形変換の機能を利用するためには、都市モデルインポート時に 起伏 を含めてインポートする必要があります。"
  },
  "manual/RoadNetwork.html": {
    "href": "manual/RoadNetwork.html",
    "title": "道路ネットワークの利用 | PLATEAU SDK for Unreal",
    "keywords": "道路ネットワークの利用 インポートされた道路モデルから道路の見た目を向上できます。 このページでその機能を説明します。 道路ネットワーク機能の概要 道路ネットワークとは、道路の車道、歩道、交差点などのレーンと、それらのつながりを構造化したものです。 本機能では、道路メッシュの形状から道路ネットワーク（道路の構造）を推定し、ユーザーが入力したパラメーターに応じて、見た目の向上を行います。 具体的には次の機能があります。 推定された車道形状を基に、道路に白線や停止線を引きます。 推定された歩道と車道に対して、それぞれ別のマテリアルを設定します。 道路ネットワークや道路情報を元に上記の見た目向上を行う機能を道路テクスチャ生成機能と呼びます。 自動生成される道路ネットワークは推定であり、現実の道路とは異なる場合があります。 道路ネットワークの機能について 下図が道路ネットワーク機能に関する画面です。 この画面を開くには、メニューバーの PLATEAU → PLATEAU SDKからウィンドウを開き、「道路調整」タブを開きます。 「道路調整」画面 道路調整の画面では、インポート済みの道路モデルから道路テクスチャ生成を行います。 「生成」ボタンをクリックしてしばらくすると道路ネットワークが生成されます。 加えて、道路ネットワークをもとに車道の白線や停止線、横断歩道、車線の矢印標示が生成され、見た目が良くなります。 ここでシーンに生成及び変換されるオブジェクトは次の通りです。 インポートした都市モデル 都市モデルの道路オブジェクトは、マテリアル分け機能によって車道用と歩道用のマテリアルが設定されます。 PLATEAUReproducedRoad という名称のアクター 生成された道路標示（白線、停止線など）がこのアクターのコンポーネントに設定されます。 コンポーネントの名称は、横断歩道であれば LineGeneratorComponent_Crossing 、白線であれば LineGeneratorComponent_WhiteLine 、破線であれば LineGeneratorComponent_DashedWhilteLine 、黄色の線であれば LineGeneratorComponent_YellowLine 、停止線であれば LineGeneratorComponent_StopLine 、車線の矢印であれば LineGeneratorComponent_WhiteLine となります。 PLATEAURnStructureModel という名称のアクター このアクターには、道路ネットワーク作成時のパラメータや道路標示生成のために一時的に道路ネットワークが格納されます。 ただし、格納されている道路ネットワークはシリアライズされない為、レベルを閉じると削除されます。 アクターの PLATEAU/Debug 項目では、 Visible をオンにすることでPIE実行時に道路ネットワーク構造を可視化できます。 可視化する種類、色などを同コンポーネントで設定できます。可視化時はPCの動作が重くなることがあります。 下図はメインの Visible をオンにしたうえで、 Road Option の Visible および Lane Option の Visible をオンにした場合の表示です。 道路ネットワーク生成時、すでに上記の生成ゲームオブジェクトが存在する場合は、古いものを置き換える形で生成します。 道路ネットワーク生成の設定項目は次のとおりです。 生成パラメータ 車線幅（メートル） ：3D都市モデルの道路幅と車線幅を基準に車線が生成されます。車線数や形状に影響します。ただし、LOD3.1以上の道路で3D都市モデルから車線幅が分かる場合はモデルが優先されます。 歩道生成時の歩道幅 ：歩道が生成可能な場合にこの幅を基準に歩道が生成されます。ただし、歩道情報を利用する設定であり、LOD2以上の道路で3D都市モデルから歩道幅が分かる場合はモデルが優先されます。 横断歩道の配置 ：横断歩道を配置する条件を次から選びます。 大きい道路に配置 : 道路の車線数が2以上、かつ長さが30m以上の道路に横断歩道を配置します。 すべての交差点に配置 : すべての交差点に横断歩道を配置します。 配置しない : 横断歩道を配置しません。 道路LOD2以上の歩道情報を利用 ：LOD2以上の道路に歩道情報があれば、それを利用して歩道を生成します。LOD1しか無い場合は、チェックを外した場合と同様に推定により歩道を決めます。 中央分離帯があれば生成 ：道路の属性情報として中央分離帯があり、それが1つのレーンを形成している場合に中央分離帯を作成します。 詳細パラメータ 同一直線に近い中間点を削除する距離 ：3つの頂点が同一直線上に並んでいるかを判断する閾値です。同一直線上にある際には中央の頂点は削除されます。 行き止まりの線の拡大許容角度 ：行き止まりの末端線の検出において、道路の末端の線の曲がり角の総和がどの角度以内なら同一直線の行き止まりとみなすかです。行き止まり道路の末端と判別される線が実際より長くて側面まで延びている場合は小さい値に、末端の線が実際より短い場合は大きい値にすると良いです。 高速道路を対象外にする ：高速道路を自動生成の対象外にします。高速道路は、複雑な立体交差などの判別がうまくいかないことが多いためデフォルトで対象外となっています。 仕組みについて 歩道推定の仕組み LOD1の道路の歩道を推定する仕組みを説明します。 まずすべてを車道扱いで生成します。 次に、パラメータで指定した歩道幅より太い道路の場合、車道を狭めて歩道を追加します。 ただし、これにより車道幅が2m未満になる場合は歩道を生成しません。 頂点の結合について 道路ネットワークの生成において、近くにある頂点は結合されたものとみなされます。 その理由は、道路モデル上で繋がっているべき頂点が離れているケースに対応するため、 および高速化のためになります。 この処理の結果として、急激なUターンを伴うなど一部の箇所で道路形状が元から変わって生成される場合があります。 非対応の形状について ゼブラゾーンなど、1つの道路の途中で車線数が変わる形状には対応しておりません。 LOD3.1以上の道路でそのような形状がある場合、1つの道路を貫く中央分離帯があるものとして扱われます。"
  }
}